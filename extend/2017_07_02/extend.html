<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Extend</title>
</head>
<body>
<div id="box">
    <input type="button" id="add" value="添加"/>
    <input type="button" id="remove" value="删除"/>
    <input type="button" id="move" value="移动"/>
    <input type="button" id="select" value="选择"/>
</div>

<input type="button" name="" id="btn" value="添加"/>
<ul id="ul1">
    <li>111</li>
    <li>222</li>
    <li>333</li>
    <li>444</li>
</ul>
<script>
    /**
     * @file JavaScript Extend
     * @author 李文辉
     * @copyright 2014-2017 海量云图（北京）数据技术有限公司
     */

    /**
     *用事件委托实现每个li被点击的效果都不一样
     */
    window.onload = function () {
        var Add = document.getElementById("add");
        var Remove = document.getElementById("remove");
        var Move = document.getElementById("move");
        var Select = document.getElementById("select");

        Add.onclick = function () {
            alert('添加');
        };
        Remove.onclick = function () {
            alert('删除');
        };
        Move.onclick = function () {
            alert('移动');
        };
        Select.onclick = function () {
            alert('选择');
        }

        /**
         * 优化上述事件委托
         */
        var oBox = document.getElementById("box");
        oBox.onclick = function (ev) {
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            if (target.nodeName.toLocaleLowerCase() == 'input') {
                switch (target.id) {
                    case 'add' :
                        alert('添加');
                        break;
                    case 'remove' :
                        alert('删除');
                        break;
                    case 'move' :
                        alert('移动');
                        break;
                    case 'select' :
                        alert('选择');
                        break;
                }
            }
        }

        /**
         * 用事件委托实现为新添加的元素绑定事件
         * @type {Element}
         */
        var oBtn = document.getElementById("btn");
        var oUl = document.getElementById("ul1");
        var aLi = oUl.getElementsByTagName('li');
        var num = 4;

        //事件委托，添加的子元素也有事件
        oUl.onmouseover = function (ev) {
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            if (target.nodeName.toLowerCase() == 'li') {
                target.style.background = "red";
            }

        };
        oUl.onmouseout = function (ev) {
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            if (target.nodeName.toLowerCase() == 'li') {
                target.style.background = "#fff";
            }

        };

        //添加新节点
        oBtn.onclick = function () {
            num++;
            var oLi = document.createElement('li');
            oLi.innerHTML = 111 * num;
            oUl.appendChild(oLi);
        };

    }
</script>
</body>
</html>